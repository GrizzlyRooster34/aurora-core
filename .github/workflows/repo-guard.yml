name: Repo Guard
on: [pull_request]
jobs:
  guard:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Verify repo name
        run: |
          EXPECTED="aurora-core"
          REPO="${GITHUB_REPOSITORY#*/}"
          if [ "$REPO" != "$EXPECTED" ]; then
            echo "Wrong repo: $REPO (expected $EXPECTED)"; exit 1; fi
      - name: Block Seven references
        run: |
          git fetch origin ${{ github.event.pull_request.base.ref }}
          git diff --name-only origin/${{ github.event.pull_request.base.ref }}...HEAD > changed.txt
          if grep -Ei "(^|/)(seven|Seven)/" changed.txt; then
            echo "Foreign path (Seven) detected"; exit 1; fi
          if grep -Ei "seven" changed.txt; then
            echo "Seven term detected"; exit 1; fi